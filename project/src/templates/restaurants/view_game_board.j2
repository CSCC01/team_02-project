{% extends 'partials/base.j2' %} 

{% block head %}
    <title>Bingo Editor (Web) </title>
    <link rel="stylesheet" href="{{ url_for('static', filename='restaurants/css/main.css') }}">
{% endblock head %} 

{% block body %} 
	<a href="{{ url_for('logout') }}">Logout</a>
    <div class="content">
        <h1>Bingo Editor (Web) </h1>
            <div class ="name-bingo-container">                
				<form action="/save" method="POST">

                <input 
                    type="text" 
                    name="board_name" 
                    placeholder="Enter Name of your Bingo Board" 
                    id="board-name" 
                    {% if board_name|length > 0 %}
                        value="{{board_name}}"
                    {% endif %}
                    required
                >
		
                <table class="goal">
					{% set count = 0 %}
                    {% for i in range(25) %}
                        {% if i % 5 == 0 %}
                            </tr>
                        {% endif %}

                        <td> 
						
                            <div class="custom-select">
								{% if i == 4 %}
									<div class="first-reward-padding">
										<div class="reward-select">
											<select name="board_reward[]" required>
												<option value="" hidden>Select reward:</option>
												{% if rewards: %}
												{% for a in rewards %}
													<option value="{{ a['_id'] }}"
														{% if i == 4 and board_reward[0] == a['_id'] %}
															selected
														{% endif %}
													> 
														{{ a["reward"] }}
													</option>
												{% endfor %}
												{% endif %}
											</select>
										</div>
									</div>
								{% endif %}
								{% if i % 5 == 4 %}
									<div class="vertical-reward-padding">
										<div class="reward-select">
											<select name="board_reward[]" required>
												<option value="" hidden>Select reward:</option>
												{% if rewards: %}
												{% for a in rewards %}
													<option value="{{ a['_id'] }}"
														{% if i == 4 and board_reward[1] == a['_id'] %}
															selected
														{% endif %}
														{% if i == 9 and board_reward[2] == a['_id'] %}
															selected
														{% endif %}
														{% if i == 14 and board_reward[3] == a['_id'] %}
															selected
														{% endif %}
														{% if i == 19 and board_reward[4] == a['_id'] %}
															selected
														{% endif %}
														{% if i == 24 and board_reward[5] == a['_id'] %}
															selected
														{% endif %}
													> 
														{{ a["reward"] }}
													</option>
												{% endfor %}
												{% endif %}
											</select>
										</div>
									</div>
								{% endif %}
																		
								
								{% if i == 24 %}
									<div class="last-reward-padding">
										<div class="reward-select">
											<select name="board_reward[]" required>
												<option value="" hidden>Select reward:</option>
												{% if rewards: %}
													{% for a in rewards %}
														<option value="{{ a['_id'] }}"
															{% if i == 24 and board_reward[6] == a['_id'] %}
																selected
															{% endif %}
														> 
															{{ a["reward"] }}
														{% endfor %}
													</option>
													
												{% endif %}
											</select>
										</div>
									</div>
									{% set count = count + 1 %}
								{% endif %}
							
                                <select name="board[]" required>
                                    <option value="" hidden>Select goal:</option>
                                    {% if goals: %}
                                    {% for a in goals %}
                                        <option value="{{ a['_id'] }}"
                                            {% if board|length > i and board[i] == a['_id'] %}
                                                selected
                                            {% endif %}
                                        > 
                                            {{ a["goal"] }}
                                        </option>
                                    {% endfor %}
                                    {% endif %}
                                </select>
                            </div>
							
						
                        </td>
						
                        {% if i % 5 == 4 %}
                            </tr>
                        {% endif %}  
                    {% endfor %}
                </table>
				
				
            </div>

			
			<table class="reward">
				{% for j in range(5) %}
					{% if j % 5 == 0 %}
						</tr>
					{% endif %}
					<td class="reward">
						<div class="reward-select-table">
							<select name="board_reward[]" required>
								<option value="" hidden>Select reward:</option>
									{% if rewards: %}
										{% for a in rewards %}
											<option value="{{ a['_id'] }}"
												{% if board_reward|length > (7+(j%5)) and board_reward[(7+(j%5))] == a['_id'] %}
													selected
												{% endif %}
											> 
											{{ a["reward"] }}
										{% endfor %}
									{% endif %}
								</option>
							</select>
						</div>
					</td>
					{% if j % 5 == 4 %}
						</tr>
					{% endif %}
				{% endfor %}
			</table>
		

            <div class="clear-save-container">
                <button type="button" value="Clear">Clear</button>
                <button type="submit" value="Save">Save</button>
            </div>
    </div>

    <script>
        document
            .querySelector(".clear-save-container [type='button']")
            .addEventListener("click", () => {
                document.querySelector("#board-name").value = "";
                document.querySelectorAll("select").forEach(e => e.value = "");
            });
    </script>

{% endblock body %}
